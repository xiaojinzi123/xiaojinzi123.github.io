<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>è¿›åˆ¶è½¬æ¢å·¥å…·</title>
        <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            color: #333;
            padding: 2rem;
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: containerSlideIn 0.8s ease-out;
        }

        @keyframes containerSlideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            animation: titleBounce 1s ease-out 0.3s both;
        }

        @keyframes titleBounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            animation: subtitleSlide 1s ease-out 0.5s both;
        }

        @keyframes subtitleSlide {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .converter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .converter-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            animation: cardSlideIn 0.8s ease-out;
        }

        @keyframes cardSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .converter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            background: rgba(255, 255, 255, 0.2);
        }

        .card-title {
            color: white;
            font-size: 1.3rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-icon {
            font-size: 1.5rem;
            animation: iconPulse 2s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .input-group {
            margin-bottom: 1rem;
        }

        .input-group label {
            display: block;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.3);
        }

        .input-group textarea {
            resize: vertical;
            min-height: 100px;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #f093fb, #f5576c);
        }

        .result-area {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            font-family: 'Consolas', 'Monaco', monospace;
            color: white;
            font-size: 1rem;
            line-height: 1.5;
            min-height: 60px;
            word-break: break-all;
        }

        .base-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.15);
        }

        .info-card h3 {
            color: white;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .info-card p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .quick-convert {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .quick-btn {
            padding: 0.6rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .quick-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .error {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid rgba(255, 107, 107, 0.5);
            padding: 0.8rem;
            border-radius: 6px;
            margin-top: 1rem;
        }

        .success {
            color: #51cf66;
            background: rgba(81, 207, 102, 0.2);
            border: 1px solid rgba(81, 207, 102, 0.5);
            padding: 0.8rem;
            border-radius: 6px;
            margin-top: 1rem;
        }

        .back-btn {
            position: fixed;
            top: 2rem;
            left: 2rem;
            padding: 0.8rem 1.5rem;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            font-weight: 500;
            z-index: 1000;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
                margin: 1rem;
            }

            .converter-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2rem;
            }

            .back-btn {
                top: 1rem;
                left: 1rem;
                padding: 0.6rem 1.2rem;
            }
        }
    </style>
    </head>
    <body>

        <div class="container">
            <div class="header">
                <h1>ğŸ”¢ è¿›åˆ¶è½¬æ¢å·¥å…·</h1>
                <p>æ”¯æŒäºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åè¿›åˆ¶ã€åå…­è¿›åˆ¶ç­‰å¤šç§è¿›åˆ¶é—´çš„è½¬æ¢</p>
            </div>

            <div class="base-info">
                <div class="info-card">
                    <h3>äºŒè¿›åˆ¶ (Binary)</h3>
                    <p>åŸºæ•°: 2<br>å­—ç¬¦: 0, 1</p>
                </div>
                <div class="info-card">
                    <h3>å…«è¿›åˆ¶ (Octal)</h3>
                    <p>åŸºæ•°: 8<br>å­—ç¬¦: 0-7</p>
                </div>
                <div class="info-card">
                    <h3>åè¿›åˆ¶ (Decimal)</h3>
                    <p>åŸºæ•°: 10<br>å­—ç¬¦: 0-9</p>
                </div>
                <div class="info-card">
                    <h3>åå…­è¿›åˆ¶ (Hexadecimal)</h3>
                    <p>åŸºæ•°: 16<br>å­—ç¬¦: 0-9, A-F</p>
                </div>
            </div>

            <div class="converter-grid">
                <!-- åŸºæœ¬è¿›åˆ¶è½¬æ¢ -->
                <div class="converter-card">
                    <div class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        åŸºæœ¬è¿›åˆ¶è½¬æ¢
                    </div>
                    <div class="input-group">
                        <label for="inputValue">è¾“å…¥æ•°å€¼:</label>
                        <input type="text" id="inputValue"
                            placeholder="è¯·è¾“å…¥è¦è½¬æ¢çš„æ•°å€¼">
                    </div>
                    <div class="input-group">
                        <label for="fromBase">ä»è¿›åˆ¶:</label>
                        <select id="fromBase">
                            <option value="2">äºŒè¿›åˆ¶ (Binary)</option>
                            <option value="8">å…«è¿›åˆ¶ (Octal)</option>
                            <option value="10" selected>åè¿›åˆ¶ (Decimal)</option>
                            <option value="16">åå…­è¿›åˆ¶ (Hexadecimal)</option>
                            <option value="custom">è‡ªå®šä¹‰è¿›åˆ¶</option>
                        </select>
                    </div>
                    <div class="input-group" id="customFromBase"
                        style="display: none;">
                        <label for="customFrom">è‡ªå®šä¹‰è¿›åˆ¶ (2-36):</label>
                        <input type="number" id="customFrom" min="2" max="36"
                            placeholder="è¾“å…¥è¿›åˆ¶æ•°">
                    </div>
                    <div class="input-group">
                        <label for="toBase">è½¬æ¢åˆ°è¿›åˆ¶:</label>
                        <select id="toBase">
                            <option value="2">äºŒè¿›åˆ¶ (Binary)</option>
                            <option value="8">å…«è¿›åˆ¶ (Octal)</option>
                            <option value="10">åè¿›åˆ¶ (Decimal)</option>
                            <option value="16" selected>åå…­è¿›åˆ¶
                                (Hexadecimal)</option>
                            <option value="custom">è‡ªå®šä¹‰è¿›åˆ¶</option>
                        </select>
                    </div>
                    <div class="input-group" id="customToBase"
                        style="display: none;">
                        <label for="customTo">è‡ªå®šä¹‰è¿›åˆ¶ (2-36):</label>
                        <input type="number" id="customTo" min="2" max="36"
                            placeholder="è¾“å…¥è¿›åˆ¶æ•°">
                    </div>
                    <div class="button-group">
                        <button class="btn" onclick="convertBase()">è½¬æ¢</button>
                        <button class="btn btn-secondary"
                            onclick="clearBase()">æ¸…ç©º</button>
                    </div>
                    <div class="result-area" id="convertResult">è½¬æ¢ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
                </div>

                <!-- å…¨è¿›åˆ¶æ˜¾ç¤º -->
                <div class="converter-card">
                    <div class="card-title">
                        <span class="card-icon">ğŸ“Š</span>
                        å…¨è¿›åˆ¶æ˜¾ç¤º
                    </div>
                    <div class="input-group">
                        <label for="allBaseInput">è¾“å…¥åè¿›åˆ¶æ•°å€¼:</label>
                        <input type="number" id="allBaseInput"
                            placeholder="è¯·è¾“å…¥åè¿›åˆ¶æ•°å€¼">
                    </div>
                    <div class="button-group">
                        <button class="btn"
                            onclick="showAllBases()">æ˜¾ç¤ºæ‰€æœ‰è¿›åˆ¶</button>
                        <button class="btn btn-secondary"
                            onclick="clearAllBases()">æ¸…ç©º</button>
                    </div>
                    <div class="result-area"
                        id="allBasesResult">æ‰€æœ‰è¿›åˆ¶ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
                </div>

                <!-- æ‰¹é‡è½¬æ¢ -->
                <div class="converter-card">
                    <div class="card-title">
                        <span class="card-icon">ğŸ“</span>
                        æ‰¹é‡è½¬æ¢
                    </div>
                    <div class="input-group">
                        <label for="batchInput">æ‰¹é‡è¾“å…¥ (æ¯è¡Œä¸€ä¸ªæ•°å€¼):</label>
                        <textarea id="batchInput"
                            placeholder="è¯·è¾“å…¥è¦è½¬æ¢çš„æ•°å€¼ï¼Œæ¯è¡Œä¸€ä¸ª"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="batchFromBase">ä»è¿›åˆ¶:</label>
                        <select id="batchFromBase">
                            <option value="2">äºŒè¿›åˆ¶</option>
                            <option value="8">å…«è¿›åˆ¶</option>
                            <option value="10" selected>åè¿›åˆ¶</option>
                            <option value="16">åå…­è¿›åˆ¶</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="batchToBase">è½¬æ¢åˆ°è¿›åˆ¶:</label>
                        <select id="batchToBase">
                            <option value="2">äºŒè¿›åˆ¶</option>
                            <option value="8">å…«è¿›åˆ¶</option>
                            <option value="10">åè¿›åˆ¶</option>
                            <option value="16" selected>åå…­è¿›åˆ¶</option>
                        </select>
                    </div>
                    <div class="button-group">
                        <button class="btn"
                            onclick="batchConvert()">æ‰¹é‡è½¬æ¢</button>
                        <button class="btn btn-secondary"
                            onclick="clearBatch()">æ¸…ç©º</button>
                    </div>
                    <div class="result-area" id="batchResult">æ‰¹é‡è½¬æ¢ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
                </div>

                <!-- è¿›åˆ¶è®¡ç®—å™¨ -->
                <div class="converter-card">
                    <div class="card-title">
                        <span class="card-icon">ğŸ§®</span>
                        è¿›åˆ¶è®¡ç®—å™¨
                    </div>
                    <div class="input-group">
                        <label for="calcNum1">ç¬¬ä¸€ä¸ªæ•°:</label>
                        <input type="text" id="calcNum1" placeholder="è¾“å…¥ç¬¬ä¸€ä¸ªæ•°">
                    </div>
                    <div class="input-group">
                        <label for="calcNum2">ç¬¬äºŒä¸ªæ•°:</label>
                        <input type="text" id="calcNum2" placeholder="è¾“å…¥ç¬¬äºŒä¸ªæ•°">
                    </div>
                    <div class="input-group">
                        <label for="calcBase">è¿›åˆ¶:</label>
                        <select id="calcBase">
                            <option value="2">äºŒè¿›åˆ¶</option>
                            <option value="8">å…«è¿›åˆ¶</option>
                            <option value="10" selected>åè¿›åˆ¶</option>
                            <option value="16">åå…­è¿›åˆ¶</option>
                        </select>
                    </div>
                    <div class="quick-convert">
                        <button class="quick-btn" onclick="calculate('add')">åŠ æ³•
                            (+)</button>
                        <button class="quick-btn"
                            onclick="calculate('subtract')">å‡æ³• (-)</button>
                        <button class="quick-btn"
                            onclick="calculate('multiply')">ä¹˜æ³• (Ã—)</button>
                        <button class="quick-btn"
                            onclick="calculate('divide')">é™¤æ³• (Ã·)</button>
                    </div>
                    <div class="result-area" id="calcResult">è®¡ç®—ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
                </div>
            </div>
        </div>

        <script>
        // å¤„ç†è‡ªå®šä¹‰è¿›åˆ¶é€‰æ‹©
        document.getElementById('fromBase').addEventListener('change', function() {
            const customFromBase = document.getElementById('customFromBase');
            if (this.value === 'custom') {
                customFromBase.style.display = 'block';
            } else {
                customFromBase.style.display = 'none';
            }
        });

        document.getElementById('toBase').addEventListener('change', function() {
            const customToBase = document.getElementById('customToBase');
            if (this.value === 'custom') {
                customToBase.style.display = 'block';
            } else {
                customToBase.style.display = 'none';
            }
        });

        // åŸºæœ¬è¿›åˆ¶è½¬æ¢
        function convertBase() {
            const inputValue = document.getElementById('inputValue').value.trim();
            const fromBaseSelect = document.getElementById('fromBase');
            const toBaseSelect = document.getElementById('toBase');
            const resultDiv = document.getElementById('convertResult');

            if (!inputValue) {
                showError(resultDiv, 'è¯·è¾“å…¥è¦è½¬æ¢çš„æ•°å€¼');
                return;
            }

            try {
                let fromBase = fromBaseSelect.value;
                let toBase = toBaseSelect.value;

                // å¤„ç†è‡ªå®šä¹‰è¿›åˆ¶
                if (fromBase === 'custom') {
                    fromBase = parseInt(document.getElementById('customFrom').value);
                    if (!fromBase || fromBase < 2 || fromBase > 36) {
                        showError(resultDiv, 'è‡ªå®šä¹‰è¿›åˆ¶å¿…é¡»åœ¨2-36ä¹‹é—´');
                        return;
                    }
                }

                if (toBase === 'custom') {
                    toBase = parseInt(document.getElementById('customTo').value);
                    if (!toBase || toBase < 2 || toBase > 36) {
                        showError(resultDiv, 'è‡ªå®šä¹‰è¿›åˆ¶å¿…é¡»åœ¨2-36ä¹‹é—´');
                        return;
                    }
                }

                // éªŒè¯è¾“å…¥æ˜¯å¦ç¬¦åˆè¿›åˆ¶è¦æ±‚
                if (!isValidForBase(inputValue, fromBase)) {
                    showError(resultDiv, `è¾“å…¥çš„æ•°å€¼ä¸ç¬¦åˆ${fromBase}è¿›åˆ¶æ ¼å¼`);
                    return;
                }

                // è½¬æ¢
                const decimal = parseInt(inputValue, fromBase);
                const result = decimal.toString(toBase).toUpperCase();

                const baseNames = {
                    2: 'äºŒè¿›åˆ¶',
                    8: 'å…«è¿›åˆ¶',
                    10: 'åè¿›åˆ¶',
                    16: 'åå…­è¿›åˆ¶'
                };

                const fromBaseName = baseNames[fromBase] || `${fromBase}è¿›åˆ¶`;
                const toBaseName = baseNames[toBase] || `${toBase}è¿›åˆ¶`;

                resultDiv.innerHTML = `
                    <div class="success">
                        <strong>è½¬æ¢æˆåŠŸï¼</strong><br>
                        ${fromBaseName}: ${inputValue}<br>
                        ${toBaseName}: ${result}<br>
                        åè¿›åˆ¶: ${decimal}
                    </div>
                `;
            } catch (error) {
                showError(resultDiv, 'è½¬æ¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥çš„æ•°å€¼æ˜¯å¦æ­£ç¡®');
            }
        }

        // éªŒè¯æ•°å€¼æ˜¯å¦ç¬¦åˆè¿›åˆ¶è¦æ±‚
        function isValidForBase(value, base) {
            const validChars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const allowedChars = validChars.substring(0, base);
            
            for (let char of value.toUpperCase()) {
                if (allowedChars.indexOf(char) === -1) {
                    return false;
                }
            }
            return true;
        }

        // æ˜¾ç¤ºæ‰€æœ‰è¿›åˆ¶
        function showAllBases() {
            const inputValue = document.getElementById('allBaseInput').value.trim();
            const resultDiv = document.getElementById('allBasesResult');

            if (!inputValue) {
                showError(resultDiv, 'è¯·è¾“å…¥åè¿›åˆ¶æ•°å€¼');
                return;
            }

            try {
                const decimal = parseInt(inputValue, 10);
                if (isNaN(decimal)) {
                    showError(resultDiv, 'è¯·è¾“å…¥æœ‰æ•ˆçš„åè¿›åˆ¶æ•°å€¼');
                    return;
                }

                const binary = decimal.toString(2);
                const octal = decimal.toString(8);
                const hex = decimal.toString(16).toUpperCase();

                resultDiv.innerHTML = `
                    <div class="success">
                        <strong>åè¿›åˆ¶: ${decimal}</strong><br>
                        äºŒè¿›åˆ¶: ${binary}<br>
                        å…«è¿›åˆ¶: ${octal}<br>
                        åå…­è¿›åˆ¶: ${hex}<br>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid rgba(255,255,255,0.3);">
                        å…¶ä»–è¿›åˆ¶:<br>
                        3è¿›åˆ¶: ${decimal.toString(3)}<br>
                        5è¿›åˆ¶: ${decimal.toString(5)}<br>
                        7è¿›åˆ¶: ${decimal.toString(7)}<br>
                        32è¿›åˆ¶: ${decimal.toString(32).toUpperCase()}<br>
                        36è¿›åˆ¶: ${decimal.toString(36).toUpperCase()}
                    </div>
                `;
            } catch (error) {
                showError(resultDiv, 'è½¬æ¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥çš„æ•°å€¼');
            }
        }

        // æ‰¹é‡è½¬æ¢
        function batchConvert() {
            const inputText = document.getElementById('batchInput').value.trim();
            const fromBase = parseInt(document.getElementById('batchFromBase').value);
            const toBase = parseInt(document.getElementById('batchToBase').value);
            const resultDiv = document.getElementById('batchResult');

            if (!inputText) {
                showError(resultDiv, 'è¯·è¾“å…¥è¦è½¬æ¢çš„æ•°å€¼');
                return;
            }

            try {
                const lines = inputText.split('\n').filter(line => line.trim() !== '');
                const results = [];

                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i].trim();
                    if (!isValidForBase(line, fromBase)) {
                        results.push(`ç¬¬${i + 1}è¡Œ: ${line} - é”™è¯¯: ä¸ç¬¦åˆ${fromBase}è¿›åˆ¶æ ¼å¼`);
                        continue;
                    }

                    try {
                        const decimal = parseInt(line, fromBase);
                        const converted = decimal.toString(toBase).toUpperCase();
                        results.push(`ç¬¬${i + 1}è¡Œ: ${line} â†’ ${converted}`);
                    } catch (error) {
                        results.push(`ç¬¬${i + 1}è¡Œ: ${line} - é”™è¯¯: è½¬æ¢å¤±è´¥`);
                    }
                }

                resultDiv.innerHTML = `
                    <div class="success">
                        <strong>æ‰¹é‡è½¬æ¢ç»“æœ:</strong><br>
                        ${results.join('<br>')}
                    </div>
                `;
            } catch (error) {
                showError(resultDiv, 'æ‰¹é‡è½¬æ¢å¤±è´¥');
            }
        }

        // è¿›åˆ¶è®¡ç®—å™¨
        function calculate(operation) {
            const num1 = document.getElementById('calcNum1').value.trim();
            const num2 = document.getElementById('calcNum2').value.trim();
            const base = parseInt(document.getElementById('calcBase').value);
            const resultDiv = document.getElementById('calcResult');

            if (!num1 || !num2) {
                showError(resultDiv, 'è¯·è¾“å…¥ä¸¤ä¸ªæ•°å€¼');
                return;
            }

            if (!isValidForBase(num1, base) || !isValidForBase(num2, base)) {
                showError(resultDiv, `è¾“å…¥çš„æ•°å€¼ä¸ç¬¦åˆ${base}è¿›åˆ¶æ ¼å¼`);
                return;
            }

            try {
                const decimal1 = parseInt(num1, base);
                const decimal2 = parseInt(num2, base);
                let result;
                let operationSymbol;

                switch (operation) {
                    case 'add':
                        result = decimal1 + decimal2;
                        operationSymbol = '+';
                        break;
                    case 'subtract':
                        result = decimal1 - decimal2;
                        operationSymbol = '-';
                        break;
                    case 'multiply':
                        result = decimal1 * decimal2;
                        operationSymbol = 'Ã—';
                        break;
                    case 'divide':
                        if (decimal2 === 0) {
                            showError(resultDiv, 'é™¤æ•°ä¸èƒ½ä¸º0');
                            return;
                        }
                        result = Math.floor(decimal1 / decimal2);
                        operationSymbol = 'Ã·';
                        break;
                    default:
                        showError(resultDiv, 'æœªçŸ¥çš„æ“ä½œ');
                        return;
                }

                const resultInBase = result.toString(base).toUpperCase();
                const baseName = {
                    2: 'äºŒè¿›åˆ¶',
                    8: 'å…«è¿›åˆ¶',
                    10: 'åè¿›åˆ¶',
                    16: 'åå…­è¿›åˆ¶'
                }[base];

                resultDiv.innerHTML = `
                    <div class="success">
                        <strong>è®¡ç®—ç»“æœ (${baseName}):</strong><br>
                        ${num1} ${operationSymbol} ${num2} = ${resultInBase}<br>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid rgba(255,255,255,0.3);">
                        åè¿›åˆ¶: ${decimal1} ${operationSymbol} ${decimal2} = ${result}
                    </div>
                `;
            } catch (error) {
                showError(resultDiv, 'è®¡ç®—å¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥çš„æ•°å€¼');
            }
        }

        // æ¸…ç©ºåŠŸèƒ½
        function clearBase() {
            document.getElementById('inputValue').value = '';
            document.getElementById('convertResult').innerHTML = 'è½¬æ¢ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ';
        }

        function clearAllBases() {
            document.getElementById('allBaseInput').value = '';
            document.getElementById('allBasesResult').innerHTML = 'æ‰€æœ‰è¿›åˆ¶ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ';
        }

        function clearBatch() {
            document.getElementById('batchInput').value = '';
            document.getElementById('batchResult').innerHTML = 'æ‰¹é‡è½¬æ¢ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ';
        }

        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showError(element, message) {
            element.innerHTML = `<div class="error">${message}</div>`;
        }

        // å¿«é€Ÿè½¬æ¢ç¤ºä¾‹
        document.addEventListener('DOMContentLoaded', function() {
            // æ·»åŠ ä¸€äº›ç¤ºä¾‹æ•°æ®
            const examples = [
                { input: '1010', from: 2, to: 10, desc: 'äºŒè¿›åˆ¶è½¬åè¿›åˆ¶' },
                { input: '255', from: 10, to: 16, desc: 'åè¿›åˆ¶è½¬åå…­è¿›åˆ¶' },
                { input: 'FF', from: 16, to: 2, desc: 'åå…­è¿›åˆ¶è½¬äºŒè¿›åˆ¶' },
                { input: '777', from: 8, to: 10, desc: 'å…«è¿›åˆ¶è½¬åè¿›åˆ¶' }
            ];

            // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ›´å¤šäº¤äº’åŠŸèƒ½
            console.log('è¿›åˆ¶è½¬æ¢å·¥å…·å·²åŠ è½½');
        });
    </script>
    </body>
</html>
